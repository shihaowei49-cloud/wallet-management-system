# ðŸš€ è…¾è®¯äº‘å®Œæ•´éƒ¨ç½²æŒ‡å—

## ä¸ºä»€ä¹ˆé€‰æ‹©è…¾è®¯äº‘ï¼Ÿ

- âœ… **æ›´ç¨³å®š**ï¼šå®Œå…¨æŽŒæŽ§æœåŠ¡å™¨
- âœ… **æ›´ç®€å•**ï¼šä¸éœ€è¦å¤æ‚çš„ Docker é…ç½®
- âœ… **æ›´ä¾¿å®œ**ï¼šè½»é‡åº”ç”¨æœåŠ¡å™¨ä½Žè‡³ 50 å…ƒ/å¹´
- âœ… **å›½å†…è®¿é—®å¿«**ï¼šæœåŠ¡å™¨åœ¨å›½å†…ï¼Œé€Ÿåº¦æ›´å¿«

---

## ðŸ“‹ éƒ¨ç½²æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ 1ï¼šè…¾è®¯äº‘è½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆæŽ¨èï¼‰â­â­â­â­â­

**ä»·æ ¼**ï¼šçº¦ 50-100 å…ƒ/å¹´
**éš¾åº¦**ï¼šâ­â­ ç®€å•
**æŽ¨èç†ç”±**ï¼šæ€§ä»·æ¯”æœ€é«˜ï¼Œé…ç½®ç®€å•

### æ–¹æ¡ˆ 2ï¼šè…¾è®¯äº‘ CVM äº‘æœåŠ¡å™¨

**ä»·æ ¼**ï¼šçº¦ 100-300 å…ƒ/å¹´
**éš¾åº¦**ï¼šâ­â­â­ ä¸­ç­‰
**æŽ¨èç†ç”±**ï¼šé…ç½®çµæ´»ï¼Œé€‚åˆé•¿æœŸä½¿ç”¨

### æ–¹æ¡ˆ 3ï¼šè…¾è®¯äº‘ Serverlessï¼ˆWebifyï¼‰

**ä»·æ ¼**ï¼šæŒ‰é‡ä»˜è´¹ï¼Œå°é¡¹ç›®åŸºæœ¬å…è´¹
**éš¾åº¦**ï¼šâ­ æœ€ç®€å•
**æŽ¨èç†ç”±**ï¼šé›¶è¿ç»´ï¼Œè‡ªåŠ¨æ‰©å®¹

---

## ðŸŽ¯ æ–¹æ¡ˆ 1ï¼šè½»é‡åº”ç”¨æœåŠ¡å™¨ï¼ˆæœ€æŽ¨èï¼‰

### ç¬¬ä¸€æ­¥ï¼šè´­ä¹°æœåŠ¡å™¨

1. è®¿é—®ï¼šhttps://cloud.tencent.com/product/lighthouse
2. é€‰æ‹©é…ç½®ï¼š
   - **åœ°åŸŸ**ï¼šé€‰ç¦»ä½ æœ€è¿‘çš„ï¼ˆå¦‚ï¼šä¸Šæµ·ã€å¹¿å·žï¼‰
   - **é•œåƒ**ï¼šUbuntu 20.04 æˆ– CentOS 7.6
   - **å¥—é¤**ï¼š2æ ¸2G å³å¯ï¼ˆå¤Ÿç”¨ï¼‰
3. è´­ä¹°ï¼ˆå¯ä»¥é€‰æœ€ä¾¿å®œçš„å¥—é¤ï¼‰

### ç¬¬äºŒæ­¥ï¼šè¿žæŽ¥æœåŠ¡å™¨

èŽ·å–æœåŠ¡å™¨ IP å’Œå¯†ç åŽï¼š

```bash
# Mac/Linux ç»ˆç«¯
ssh root@ä½ çš„æœåŠ¡å™¨IP

# Windows ç”¨ PuTTY æˆ– Xshell
```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…çŽ¯å¢ƒ

ç™»å½•æœåŠ¡å™¨åŽï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£… Node.js 18
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# éªŒè¯å®‰è£…
node -v  # åº”è¯¥æ˜¾ç¤º v18.x.x
npm -v

# å®‰è£… PM2ï¼ˆè¿›ç¨‹ç®¡ç†ï¼‰
npm install -g pm2

# å®‰è£… Git
apt install -y git

# å®‰è£… Nginx
apt install -y nginx
```

### ç¬¬å››æ­¥ï¼šéƒ¨ç½²åŽç«¯

```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
cd /var/www
git clone https://github.com/shihaowei49-cloud/wallet-management-system.git
cd wallet-management-system/backend

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»ºçŽ¯å¢ƒå˜é‡
cat > .env << EOF
PORT=5000
JWT_SECRET=$(node -e "console.log(require('crypto').randomBytes(64).toString('hex'))")
NODE_ENV=production
EOF

# ä½¿ç”¨ PM2 å¯åŠ¨
pm2 start src/server.js --name wallet-backend
pm2 save
pm2 startup
```

### ç¬¬äº”æ­¥ï¼šéƒ¨ç½²å‰ç«¯

```bash
cd /var/www/wallet-management-system/frontend

# åˆ›å»ºç”Ÿäº§çŽ¯å¢ƒå˜é‡
cat > .env.production << EOF
VITE_API_URL=http://ä½ çš„æœåŠ¡å™¨IP:5000/api
EOF

# å®‰è£…ä¾èµ–
npm install

# æž„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å¤åˆ¶åˆ° Nginx ç›®å½•
cp -r dist /var/www/wallet-frontend
```

### ç¬¬å…­æ­¥ï¼šé…ç½® Nginx

```bash
# åˆ›å»º Nginx é…ç½®
cat > /etc/nginx/sites-available/wallet << 'EOF'
server {
    listen 80;
    server_name _;

    # å‰ç«¯
    location / {
        root /var/www/wallet-frontend;
        index index.html;
        try_files $uri $uri/ /index.html;
    }

    # åŽç«¯ API ä»£ç†
    location /api {
        proxy_pass http://localhost:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }
}
EOF

# å¯ç”¨é…ç½®
ln -s /etc/nginx/sites-available/wallet /etc/nginx/sites-enabled/
rm /etc/nginx/sites-enabled/default

# æµ‹è¯•é…ç½®
nginx -t

# é‡å¯ Nginx
systemctl restart nginx
```

### ç¬¬ä¸ƒæ­¥ï¼šè®¿é—®ç³»ç»Ÿ

åœ¨æµè§ˆå™¨è®¿é—®ï¼š
```
http://ä½ çš„æœåŠ¡å™¨IP
```

ç™»å½•è´¦å·ï¼š
- ç”¨æˆ·åï¼š`admin`
- å¯†ç ï¼š`admin123`

---

## ðŸŽ¯ æ–¹æ¡ˆ 2ï¼šä¸€é”®éƒ¨ç½²è„šæœ¬

æˆ‘å¸®æ‚¨åˆ›å»ºäº†è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œå³å¯ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ
curl -fsSL https://raw.githubusercontent.com/shihaowei49-cloud/wallet-management-system/main/deploy-tencent.sh | bash
```

---

## ðŸ” é…ç½® HTTPSï¼ˆå¯é€‰ä½†æŽ¨èï¼‰

### ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦

```bash
# å®‰è£… Certbot
apt install -y certbot python3-certbot-nginx

# èŽ·å–è¯ä¹¦ï¼ˆéœ€è¦æœ‰åŸŸåï¼‰
certbot --nginx -d ä½ çš„åŸŸå.com

# è‡ªåŠ¨ç»­æœŸ
certbot renew --dry-run
```

---

## ðŸ› ï¸ æ—¥å¸¸ç»´æŠ¤å‘½ä»¤

### æŸ¥çœ‹åŽç«¯æ—¥å¿—
```bash
pm2 logs wallet-backend
```

### é‡å¯åŽç«¯
```bash
pm2 restart wallet-backend
```

### æŸ¥çœ‹åŽç«¯çŠ¶æ€
```bash
pm2 status
```

### æ›´æ–°ä»£ç 
```bash
cd /var/www/wallet-management-system
git pull

# é‡å¯åŽç«¯
cd backend
npm install
pm2 restart wallet-backend

# é‡æ–°æž„å»ºå‰ç«¯
cd ../frontend
npm install
npm run build
cp -r dist /var/www/wallet-frontend
nginx -s reload
```

---

## ðŸ†˜ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :5000

# æ€æ­»è¿›ç¨‹
kill -9 è¿›ç¨‹ID
```

### é—®é¢˜ 2: Nginx 403 é”™è¯¯

```bash
# æ£€æŸ¥æƒé™
chmod -R 755 /var/www/wallet-frontend

# æ£€æŸ¥ SELinuxï¼ˆCentOSï¼‰
setenforce 0
```

### é—®é¢˜ 3: æ— æ³•è®¿é—®

```bash
# æ£€æŸ¥é˜²ç«å¢™
ufw status
ufw allow 80
ufw allow 443

# æ£€æŸ¥è…¾è®¯äº‘å®‰å…¨ç»„
# éœ€è¦åœ¨è…¾è®¯äº‘æŽ§åˆ¶å°å¼€æ”¾ 80ã€443 ç«¯å£
```

---

## ðŸ’° è´¹ç”¨ä¼°ç®—

### è½»é‡åº”ç”¨æœåŠ¡å™¨
- **æœ€ä½Žé…ç½®**ï¼š2æ ¸2Gï¼Œ50å…ƒ/å¹´
- **æŽ¨èé…ç½®**ï¼š2æ ¸4Gï¼Œ100å…ƒ/å¹´
- **åŒ…å«**ï¼š
  - æœåŠ¡å™¨
  - å…¬ç½‘ IP
  - æµé‡åŒ…ï¼ˆé€šå¸¸å¤Ÿç”¨ï¼‰

### åŸŸåï¼ˆå¯é€‰ï¼‰
- **.com åŸŸå**ï¼šçº¦ 60 å…ƒ/å¹´
- **.cn åŸŸå**ï¼šçº¦ 30 å…ƒ/å¹´

### æ€»è®¡
- **æœ€ä½Žæˆæœ¬**ï¼š50 å…ƒ/å¹´ï¼ˆä»…æœåŠ¡å™¨ï¼‰
- **æŽ¨èé…ç½®**ï¼š150 å…ƒ/å¹´ï¼ˆæœåŠ¡å™¨ + åŸŸåï¼‰

---

## ðŸŽ è‡ªåŠ¨éƒ¨ç½²è„šæœ¬

è®©æˆ‘åˆ›å»ºä¸€ä¸ªä¸€é”®éƒ¨ç½²è„šæœ¬ï¼š
